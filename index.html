<html>
  <head>
    <script class="text/javascript">
      window.guides = {
        'Any%': 'WG_any_v3',
        'All Lasers': 'WG_all_lasers_final',
        '100%': 'WG_100_final2',
        '100% (advanced)': 'WG_100_advanced_final2',
        'Low% (117, obsolete)': 'WG_low_final',
        'All Discarded Panels': 'WG_all_discards',
        'All Discarded Panels Low%': 'WG_all_discards_low',
      }

      function getImage(guideName, index) {
        var url = 'https://github.com/jbzdarkid/WitnessGuide/raw/main/' + window.guides[guideName] + '/'
        return url + index.toString().padStart(5, '0') + '.png'
      }

      window.onload = function() {
        var guideChooser = document.getElementById('guideChooser')
        var nextPicture = document.getElementById('nextPicture')

        for (var guide of Object.keys(window.guides)) {
          var option = document.createElement('option')
          option.innerText = guide
          guideChooser.appendChild(option)
        }
        // Defaults on page load
        guideChooser.value = 'Any%'
        nextPicture.setAttribute('index', 0)
        nextPicture.src = getImage('Any%', 0)
        nextPicture.style.display = null

        // Function that runs when you change guides
        guideChooser.onchange = function() {
          nextPicture.setAttribute('index', 0)
          nextPicture.src = getImage(guideChooser.value, 0)
        }

        // Function that runs when you click on the image
        nextPicture.onclick = function(event) {
          var isRightClick = event.which === 3 || !!(event.touches && event.touches.length > 1)
          var index = parseInt(nextPicture.getAttribute('index'))
          index = index + (isRightClick ? -1 : 1)
          if (index < 0) index = 0
          nextPicture.setAttribute('index', index)
          nextPicture.src = getImage(guideChooser.value, index)
        }
      }
    </script>
  </head>
  <body>
    <div style="display: flex; flex-direction: column; height: 100%">
      <select id="guideChooser" style="margin: auto; font-size: 64px"></select>
      <img id="nextPicture" style="display:none" />
    </div>
  </body>
</html>
